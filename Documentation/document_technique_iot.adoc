= Documentation technique de l'application IOT
:icons: font
:models: models
:experimental:
:incremental:
:numbered:
:toc: macro
:window: _blank
:correction!:

toc::[]

Version de l'application : V1.0 +
Date : 06/12/2024 +
Equipe : 1A-1 +
Client : BuildMyPC +
Projet : Application de gestion d'entrepôt +

== Description du projet

=== Équipe

L'équipe est composée de cinq membres avec les rôles suivants :

- *Romain* : Product Owner et Développeur
- *Kilian* : Développeur
- *Titouan* : Développeur
- *Pablo* : Développeur
- *Hugo* : Scrum Master et Développeur

=== Contexte du projet

Le projet a pour objectif de développer une application de gestion d’entrepôt pour l’entreprise BuildMyPC, spécialisée dans la vente de composants informatiques et d’ordinateurs montés. Bien que son activité principale ne soit pas le stockage, l’entreprise doit gérer des locaux pour stocker les produits nécessaires à son activité. BuildMyPC souhaite donc intégrer une solution logicielle complémentaire pour surveiller les conditions environnementales de ses entrepôts, telles que la température, l'humidité et le niveau de CO2, afin de garantir la qualité de ses produits. + 
L'application devra également inclure un module pour suivre la production et la consommation énergétique des panneaux solaires de l'entreprise, permettant une gestion optimisée de l’énergie et une approche écoresponsable. Ce projet vise à renforcer l'efficacité opérationnelle de l’entreprise tout en soutenant ses engagements en matière de durabilité.

=== Objectifs du projet

**Problématique :**  

Garantir la fiabilité et l’efficacité de l’application IoT de gestion d’entrepôt pour assurer la qualité des produits et optimiser la gestion énergétique, tout en offrant une expérience utilisateur optimale. +

**Objectifs :**

- Valider le fonctionnement des connexions, des capteurs et des modules énergétiques.

- Assurer l’affichage précis et en temps réel des données, même en cas d’erreurs ou de données manquantes.

- Tester les mécanismes d’alerte et de visualisation pour une prise de décision rapide.

- Renforcer la robustesse du système face aux erreurs et interruptions.

- Aligner l’application avec les objectifs de durabilité et d’efficacité opérationnelle de BuildMyPC.

== Architecture technique  

=== Vue d'ensemble  
L'application repose sur une architecture modulaire intégrant plusieurs composants pour surveiller les conditions environnementales et gérer les entrepôts de l'entreprise BuildMyPC.

image::images/doc_tech_iot/architecture_iot.png[]

L'application est disponible en installant le fichier "Appli-IOT.zip" dans la https://github.com/IUT-Blagnac/sae-3-01-devapp-G1A-1/releases/tag/V1.0[dernière release] +

=== Analyse
[cols="1,2", options="header"]  
|===  
| Composant | Description  
| MQTT Broker | Serveur central qui gère la communication entre les capteurs et l'application via le protocole MQTT.  
| Interface utilisateur | Module front-end permettant aux utilisateurs de consulter les données et de configurer les seuils. Développé en JavaFX.  
| Back-end | Service développé en Python pour collecter, analyser et stocker les données des capteurs.  
|===  

=== Technologies utilisées  
- **MQTT** : Communication entre capteurs et serveur.  
- **Java** : Interface graphique et interactions avec le système de gestion.  
- **Python** : Gestion des données en temps réel et traitement des seuils.  
- **Python** : Stockage des données.  
- **JSON** : Format de configuration pour les seuils et les paramètres des capteurs.  

== Fonctionnalités principales  

=== Collecte de données  
- Les capteurs transmettent les données en temps réel au serveur MQTT.  
- Les données sont récupérées par un script Python et sauvegardées dans des fichiers.  

=== Gestion des alertes  
- Le système analyse les seuils définis dans le fichier `config.json`.  
- En cas de dépassement, une alerte est générée, écrite dans un fichier et lue par l'interface utilisateur.  

=== Suivi énergétique  
- Les données des panneaux solaires sont récupérées via MQTT et affichées sous forme de graphiques dans l'application.  

== Configuration et déploiement  

=== Pré-requis  
**Matériel** :  

  - PC sous Windows ou Linux. 

  - Capteurs compatibles MQTT (déjà fournie) 

**Logiciels** : 

  - Python 3.11.9+  

  - Java 17  

=== Installation  

==== **Installer les dépendances Python :**  Utilisez la commande suivante pour installer les bibliothèques nécessaires :
[source,bash]
----
pip install paho-mqtt matplotlib
----

==== **Lancer le serveur Python :**  Exécutez le script principal pour démarrer la collecte des données et la gestion des seuils :  
[source,bash]
----
python3 MQTT.py
----

==== **Configurer l’interface utilisateur :**  Compilez et exécutez le fichier Java contenant l’interface graphique :  
[source,bash]
----
java MainApp
----


=== Fichier de configuration  

Le fichier `config.json` contient les paramètres personnalisables, notamment les seuils de température et d'humidité :  

[source,json]  
----  
{
    "max": {
        "temperature_max": 20,
        "humidite_max": 60,
        "taux_max": 1200
    },
    "salle": {
        "num_salle": "B001,B002,B004,B005,B006"
    },
    "lecture": {
        "frequence": 15
    },
    "donnee": {
        "temperature": true,
        "humidite": true,
        "taux": true
    }
}
----  

Ajoutez (salles) ou modifiez les paramètres selon vos besoins avant de démarrer l’application. La configuration sera possible depuis l'application de manière plus intuitive.  

== Tests et Validation  

=== Tests automatiques  
Des scripts Python sont fournis pour valider les composants essentiels :  

- **Test du Broker MQTT :**  Vérifie la connexion au broker et la réception des messages en exécutant le fichier `TestConnexion.py`.  

- **Validation de la configuration :**  S’assure que le fichier `config.json` est bien formaté et respecte les seuils attendus en le paramétrant depuis l'app Java `Configuration de l'application`.  

=== Tests manuels  
- Simulez une alerte en envoyant des données MQTT dépassant les seuils définis dans `config.json`.  
- Vérifiez l’affichage des données dans l’interface utilisateur et la génération d’alertes.  

== Maintenance et Support  

=== Surveillance des logs  
Les logs système sont enregistrés dans les dossiers `datas` et `alert`.  

=== Mise à jour  
==== **Mettre à jour les dépendances Python :**  Utilisez la commande suivante pour mettre à jour toutes les bibliothèques Python :  
[source,bash]
----
pip install --upgrade <package_name>
----

==== **Mise à jour de l'interface utilisateur :**  Exécuter l'application Java
[source,bash]
----
java MainApp.java
----

=== Contact  
Pour toute assistance ou retour, contactez l'équipe technique via l’adresse suivante :  
`support@buildmypc.com`.  
